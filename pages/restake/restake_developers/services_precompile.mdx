### ServicesPrecompile

The `ServicesPrecompile` is a precompiled contract that facilitates interaction with the Tangle network's services functionality. It provides a comprehensive interface for creating and managing service blueprints, requesting services, and handling service lifecycle operations.

The latest version of the precompile can be found [here](https://github.com/tangle-network/tangle/blob/main/precompiles/services/Services.sol).

#### Address

- **Contract Address**: `0x0000000000000000000000000000000000000900`

This interface is designed to be used by Solidity contracts to interact with the Services pallet, enabling blueprint creation, service orchestration, and operator management on the Tangle network.

#### Interface

```solidity
// SPDX-License-Identifier: GPL-3.0-only
pragma solidity >=0.8.3;

/// @dev The Services contract's address.
address constant SERVICES = 0x0000000000000000000000000000000000000900;

/// @dev The Services contract's instance.
Services constant SERVICES_CONTRACT = Services(SERVICES);

/// @author The Tangle Team
/// @title Pallet Services Interface
/// @title The interface through which solidity contracts will interact with the Services pallet
/// @custom:address 0x0000000000000000000000000000000000000900
interface Services {
    /// @dev Custom errors for service operations
    error InvalidPermittedCallers();
    error InvalidOperatorsList();
    error InvalidRequestArguments();
    error InvalidTTL();
    error InvalidAmount();
    error ValueMustBeZeroForERC20();
    error ValueMustBeZeroForCustomAsset();
    error PaymentAssetShouldBeCustomOrERC20();

    /// @dev Create a new service blueprint.
    /// @param blueprint_data The encoded blueprint data including metadata and configuration.
    function createBlueprint(bytes calldata blueprint_data) external returns (uint8);

    /// @dev Request a new service instance.
    /// @param blueprint_id The ID of the blueprint to instantiate.
    /// @param security_requirements Security requirements for the service.
    /// @param permitted_callers_data Encoded list of permitted callers.
    /// @param service_providers_data Encoded list of service providers.
    /// @param request_args_data Arguments for the service request.
    /// @param ttl Time-to-live for the service.
    /// @param payment_asset_id Asset ID for payment (0 for ERC20).
    /// @param payment_token_address Token address if using ERC20.
    /// @param payment_amount Amount to pay for the service.
    /// @param min_operators Minimum number of operators required.
    /// @param max_operators Maximum number of operators allowed.
    function requestService(
        uint256 blueprint_id,
        bytes[] calldata security_requirements,
        bytes calldata permitted_callers_data,
        bytes calldata service_providers_data,
        bytes calldata request_args_data,
        uint256 ttl,
        uint256 payment_asset_id,
        address payment_token_address,
        uint256 payment_amount,
        uint32 min_operators,
        uint32 max_operators
    ) external payable returns (uint8);

    /// @dev Terminate an active service.
    /// @param service_id The ID of the service to terminate.
    function terminateService(uint256 service_id) external returns (uint8);

    /// @dev Call a job within an active service.
    /// @param service_id The ID of the service.
    /// @param job The job index to call.
    /// @param args_data Arguments for the job call.
    function callJob(uint256 service_id, uint8 job, bytes calldata args_data) external returns (uint8);

    /// @dev Slash an operator for misbehavior.
    /// @param offender The operator to slash.
    /// @param service_id The service ID related to the offense.
    /// @param percent The percentage to slash (0-100).
    function slash(bytes calldata offender, uint256 service_id, uint8 percent) external returns (uint8);

    /// @dev Dispute an unapplied slash.
    /// @param era The era of the slash.
    /// @param index The index of the slash.
    function dispute(uint32 era, uint32 index) external returns (uint8);
}
```

#### Key Concepts

##### Blueprint Creation

Blueprints define reusable service templates that operators can instantiate. They contain:

- Service metadata and configuration
- Job definitions and requirements
- Security and operational parameters

##### Service Lifecycle

1. **Request**: Users request service instances from blueprints
2. **Active**: Services run with assigned operators
3. **Termination**: Services end when TTL expires or manually terminated

##### Payment System

- Supports multiple asset types (native, ERC20, custom)
- Payment amount distributed among operators
- Use `msg.value` for native token payments

#### Example Usage

```solidity
contract ServiceRequestExample {
    address constant SERVICES_ADDRESS = 0x0000000000000000000000000000000000000900;
    IServicesPrecompile services = IServicesPrecompile(SERVICES_ADDRESS);

    function requestSimpleService(
        uint256 blueprintId,
        uint256 ttl,
        uint256 paymentAmount
    ) public payable returns (uint8) {
        // Request a service with native token payment
        uint8 statusCode = services.requestService{value: paymentAmount}(
            blueprintId,
            new bytes[](0), // No special security requirements
            "", // No caller restrictions
            "", // Any operators
            "", // No special arguments
            ttl,
            1, // Native asset
            address(0), // Not needed for native
            paymentAmount,
            1, // Min 1 operator
            5  // Max 5 operators
        );

        require(statusCode == 0, "Service request failed");
        return statusCode;
    }

    function requestERC20Service(
        uint256 blueprintId,
        address tokenAddress,
        uint256 amount
    ) public returns (uint8) {
        // Request a service with ERC20 payment
        // Note: Ensure token approval before calling
        uint8 statusCode = services.requestService(
            blueprintId,
            new bytes[](0),
            "",
            "",
            "",
            86400, // 24 hour TTL
            0, // ERC20 asset
            tokenAddress,
            amount,
            1,
            3
        );

        require(statusCode == 0, "Service request failed");
        return statusCode;
    }
}
```

#### Error Handling

The interface includes custom errors for better debugging:

- `InvalidPermittedCallers`: Invalid caller restrictions
- `InvalidOperatorsList`: Invalid operator specification
- `InvalidRequestArguments`: Malformed request parameters
- `InvalidTTL`: TTL value out of bounds
- `InvalidAmount`: Payment amount issues
- `ValueMustBeZeroForERC20`: Incorrect msg.value for ERC20 payments
- `PaymentAssetShouldBeCustomOrERC20`: Invalid payment asset type
