---
title: Blueprint Development on Tangle
---

# Blueprint Jobs Macro System Documentation

## The #[job] Macro

The `#[job]` macro is used to define individual tasks or jobs within a blueprint. It allows you to specify various parameters and metadata for each job.

```rust
#[job(id = <job_id>, params(<param_list>), result(<result_type>), verifier(evm = "<contract_name>"))]
pub fn job_name(<parameters>) -> Result<<return_type>, <error_type>> {
    // Job implementation
}
```

- id: A unique identifier for the job.
- params: A list of parameters that the job accepts.
- result: The type of result the job produces (often represented by an underscore \_).
- verifier: Specifies an EVM contract for job verification.

The default implementation targets deployment on Tangle and specifies an EVM contract for verification. The contract name is cross-referenced with the name of a contract in a `foundry` project and should be identical in order to deploy seamlessly to Tangle.

### Custom Event Listener (Eigenlayer)

You can specify a custom EVM event listener for the job, which is particularly needed when building an AVS on Eigenlayer. 
```rust
#[job(
    id = 1,
    params(<param_list>),
    result(_),
    event_handler(
        instance = IncredibleSquaringTaskManager,
        event = IncredibleSquaringTaskManager::NewTaskCreated,
        event_converter = convert_event_to_inputs,
        callback = IncredibleSquaringTaskManager::IncredibleSquaringTaskManagerCalls::respondToTask
    ),
)]

```

```rust

### Examples

1. Keygen Job:

```rust
#[job(id = 0, params(n, t), result(_))]
pub fn keygen(ctx: &MyContext, n: u16, t: u16) -> Result<Vec<u8>, Error> {
    let _ = (n, t, ctx);
    Ok(vec![0; 33])
}
```

2. Sign Job:

```rust
#[job(id = 1, params(keygen_id, data), result(_))]
pub async fn sign(keygen_id: u64, data: Vec<u8>) -> Result<Vec<u8>, Error> {
    let _ = (keygen_id, data);
    Ok(vec![0; 65])
}
```

3. Run Gaia Node Job:

```rust
#[sdk::job(id = 1, params(data), result(_), verifier(evm = "GaiaAiAgentBlueprint"))]
pub async fn run_gaia_node_job(data: Vec<u8>) -> Result<String, Infallible> {
    let (_, outputs) = runner::run_gaia_node().await?;
    Ok(serde_json::to_string(&outputs)?)
}
```